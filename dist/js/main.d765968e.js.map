{"version":3,"file":"js/main.d765968e.js","mappings":"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","sources":["webpack://bookshop_api/./src/js/main.js","webpack://bookshop_api/./src/js/carousel.js","webpack://bookshop_api/./src/js/scrollHandler.js","webpack://bookshop_api/./src/js/bookstore.js"],"sourcesContent":["import { setupCarousel } from \"./carousel\";\r\nimport { setupScrollHandler } from \"./scrollHandler\";\r\nimport { setupBookstore } from \"./bookstore\"; // Ваш модуль для книг\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  setupCarousel();\r\n  setupScrollHandler();\r\n  setupBookstore();\r\n});\r\n","export const setupCarousel = () => {\r\n  let index = 0;\r\n  const imgElements = document.querySelectorAll(\".slider-image\");\r\n  const points = Array.from(document.querySelectorAll(\".points circle\"));\r\n\r\n  const updateCarousel = () => {\r\n    points.forEach((point) => point.classList.remove(\"point_active\"));\r\n    imgElements.forEach((img) => img.style.display = 'none');\r\n    imgElements[index].style.display = 'block'; // Показываем текущее изображение\r\n    points[index].classList.add(\"point_active\");\r\n    index = (index + 1) % imgElements.length;\r\n  };\r\n\r\n  const startCarousel = () => {\r\n    setInterval(updateCarousel, 5000);\r\n  };\r\n\r\n  const pointClick = (event) => {\r\n    points.forEach((point) => point.classList.remove(\"point_active\"));\r\n    event.target.classList.add(\"point_active\");\r\n    index = points.indexOf(event.target);\r\n    updateCarousel();\r\n  };\r\n\r\n  points.forEach((point) => point.addEventListener(\"click\", pointClick));\r\n\r\n  // Initialize the carousel\r\n  imgElements.forEach((img, idx) => {\r\n    img.style.display = idx === 0 ? 'block' : 'none'; // Показываем только первое изображение\r\n  });\r\n  updateCarousel();\r\n  startCarousel();\r\n};","export const setupScrollHandler = () => {\r\n  const sideBarWrapper = document.querySelector(\".sidebar-wrapper\");\r\n  const header = document.querySelector(\".header\");\r\n  const promoOne = document.querySelector(\".promo-one\");\r\n  const promoTwo = document.querySelector(\".promo-two\");\r\n\r\n  const asideScrollFix = () => {\r\n    const isScrollDown = window.scrollY > 0;\r\n    const sideBarWrapperRect = sideBarWrapper.getBoundingClientRect();\r\n    const promoOneRect = promoOne.getBoundingClientRect();\r\n    const promoTwoRect = promoTwo.getBoundingClientRect();\r\n\r\n    if (isScrollDown && sideBarWrapperRect.top < 110) {\r\n      sideBarWrapper.style.position = \"fixed\";\r\n      sideBarWrapper.style.top = `${header.offsetHeight}px`;\r\n    } else {\r\n      sideBarWrapper.style.position = \"absolute\";\r\n      sideBarWrapper.style.top = \"840px\";\r\n    }\r\n\r\n    promoOne.style.display =\r\n      isScrollDown && promoOneRect.top < 110 ? \"none\" : \"block\";\r\n    promoTwo.style.display =\r\n      isScrollDown && promoTwoRect.top < 110 ? \"none\" : \"block\";\r\n  };\r\n\r\n  window.addEventListener(\"scroll\", asideScrollFix);\r\n};\r\n","export function setupBookstore() {\r\n  // Находим элементы на странице\r\n  const bookContainer = document.querySelector(\".book-container\");\r\n  const loadMoreButton = document.querySelector(\".load-more-button\");\r\n  const categoryLinks = document.querySelectorAll(\".sidebar-category__item\");\r\n  const cartCountCircle = document.querySelector(\".nav__icon_count-circle\");\r\n  const cartCountText = cartCountCircle.querySelector(\".nav__icon_count-text\");\r\n\r\n  let startIndex = 0;\r\n  const maxResults = 6;\r\n  let currentCategory = \"Architecture\";\r\n\r\n  const bookCache = {};\r\n\r\n  // Определение SVG для звезд рейтинга\r\n  const svgDefs = `\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\r\n            <symbol id=\"star\" viewBox=\"0 0 32 32\">\r\n                <path d=\"M16 2.5l4.5 9.1 10 1.4-7.2 7 1.7 10-9-4.8-9 4.8 1.7-10-7.2-7 10-1.4z\"/>\r\n            </symbol>\r\n        </svg>\r\n    `;\r\n  document.body.insertAdjacentHTML(\"afterbegin\", svgDefs);\r\n\r\n  // Функция для загрузки книг\r\n  async function loadBooks(category = currentCategory) {\r\n    try {\r\n      const response = await fetch(\r\n        `https://www.googleapis.com/books/v1/volumes?q=subject:${category}&key=AIzaSyCdn-QMlS7F2R3184SxsPsYYjEAL9jTCiw&printType=books&startIndex=${startIndex}&maxResults=${maxResults}&langRestrict=en`\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(`Ошибка HTTP! статус: ${response.status}`);\r\n      }\r\n      const books = await response.json();\r\n      console.log(books); // Логируем весь объект books при загрузке книг\r\n      displayBooks(books);\r\n      startIndex += maxResults;\r\n      loadMoreButton.style.display =\r\n        startIndex >= books.totalItems ? \"none\" : \"block\";\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  // Обработчик события на кнопке \"Загрузить ещё\"\r\n  loadMoreButton.addEventListener(\"click\", () => {\r\n    console.log(\"Кнопка 'Загрузить ещё' нажата\");\r\n    loadBooks(currentCategory);\r\n  });\r\n\r\n  // Обработчик кликов по категориям\r\n  categoryLinks.forEach((link) => {\r\n    link.addEventListener(\"click\", async (event) => {\r\n      event.preventDefault();\r\n      const category = event.target.textContent.trim();\r\n      categoryLinks.forEach((item) =>\r\n        item.classList.remove(\"sidebar-category__item_active\")\r\n      );\r\n      link.classList.add(\"sidebar-category__item_active\");\r\n      await onCategoryChange(category);\r\n    });\r\n  });\r\n\r\n  // Функция для отображения книг\r\n  function displayBooks(books) {\r\n    const cartItems = JSON.parse(localStorage.getItem(\"cartItems\")) || [];\r\n    books.items.forEach((book) => {\r\n      const { volumeInfo, saleInfo } = book;\r\n      const imageUrl = volumeInfo.imageLinks\r\n        ? volumeInfo.imageLinks.thumbnail\r\n        : \"https://via.placeholder.com/128x192.png?text=No+Cover\";\r\n      const authors = volumeInfo.authors\r\n        ? volumeInfo.authors.join(\", \")\r\n        : \"Unknown author\";\r\n      const title = volumeInfo.title || \"No title\";\r\n      const bookKey = `${title}-${authors}`;\r\n      const description = volumeInfo.description || \"No description\";\r\n\r\n      let { rating, ratingCount, price, priceSource } = getBookData(\r\n        book,\r\n        bookKey,\r\n        saleInfo\r\n      );\r\n\r\n      console.log(\r\n        `Загружена книга: ${title} автор(ы): ${authors} цена: ${price} (${priceSource})`\r\n      );\r\n\r\n      const bookElement = createBookElement({\r\n        imageUrl,\r\n        authors,\r\n        title,\r\n        rating,\r\n        ratingCount,\r\n        description,\r\n        price,\r\n        priceSource,\r\n        cartItems,\r\n      });\r\n      bookContainer.appendChild(bookElement);\r\n    });\r\n  }\r\n\r\n  // Функция для получения данных книги\r\n  function getBookData(book, bookKey, saleInfo) {\r\n    if (bookCache[bookKey]) {\r\n      return bookCache[bookKey];\r\n    }\r\n\r\n    const volumeInfo = book.volumeInfo;\r\n    const rating = volumeInfo.averageRating\r\n      ? Math.floor(volumeInfo.averageRating)\r\n      : Math.floor(Math.random() * 5) + 1;\r\n    const ratingCount = volumeInfo.ratingsCount\r\n      ? volumeInfo.ratingsCount\r\n      : Math.floor(Math.random() * 1000);\r\n    let price, priceSource;\r\n\r\n    if (saleInfo?.retailPrice?.amount) {\r\n      let amount = saleInfo.retailPrice.amount;\r\n      if (saleInfo.retailPrice.currencyCode === \"EUR\") {\r\n        console.log(`Цена в EUR: ${amount}, конвертация в USD`);\r\n        amount *= 0.92; // Пример конвертации из евро в доллары\r\n      } else if (saleInfo.retailPrice.currencyCode === \"RUB\") {\r\n        console.log(`Цена в RUB: ${amount}, конвертация в USD`);\r\n        amount *= 0.1; // Конвертация из RUB в USD\r\n      } else if (saleInfo.retailPrice.currencyCode === \"GBP\") {\r\n        console.log(`Цена в GBP: ${amount}, конвертация в USD`);\r\n        amount *= 1.28; // Конвертация из GBP в USD\r\n      }\r\n      price = amount.toFixed(2);\r\n      // priceSource = 'API';\r\n    } else {\r\n      price = (Math.random() * 10).toFixed(2);\r\n      // priceSource = 'Generated';\r\n    }\r\n    price = `$${price}`;\r\n\r\n    bookCache[bookKey] = { rating, ratingCount, price, priceSource };\r\n    return bookCache[bookKey];\r\n  }\r\n\r\n  // Функция для создания элемента книги\r\n  function createBookElement({\r\n    imageUrl,\r\n    authors,\r\n    title,\r\n    rating,\r\n    ratingCount,\r\n    description,\r\n    price,\r\n    priceSource,\r\n    cartItems,\r\n  }) {\r\n    const bookElement = document.createElement(\"div\");\r\n    bookElement.classList.add(\"book\");\r\n\r\n    const bookImageElement = document.createElement(\"div\");\r\n    bookImageElement.classList.add(\"book-image\");\r\n    const imageElement = document.createElement(\"img\");\r\n    imageElement.src = imageUrl;\r\n    imageElement.classList.add(\"book-image__image\");\r\n    imageElement.onerror = () => {\r\n      imageElement.src =\r\n        \"https://via.placeholder.com/128x192.png?text=No+Cover\";\r\n    };\r\n    bookImageElement.appendChild(imageElement);\r\n\r\n    const bookInfoElement = document.createElement(\"div\");\r\n    bookInfoElement.classList.add(\"book-info\");\r\n    bookInfoElement.appendChild(createElement(\"h3\", \"book-author\", authors));\r\n    bookInfoElement.appendChild(createElement(\"p\", \"book-title\", title));\r\n    bookInfoElement.appendChild(createRatingElement(rating, ratingCount));\r\n    bookInfoElement.appendChild(\r\n      createElement(\"p\", \"book-description\", description)\r\n    );\r\n    bookInfoElement.appendChild(createElement(\"p\", \"book-price\", `${price}`));\r\n\r\n    const buttonElement = createButtonElement({\r\n      title,\r\n      authors,\r\n      price,\r\n      cartItems,\r\n    });\r\n    bookInfoElement.appendChild(buttonElement);\r\n\r\n    bookElement.appendChild(bookImageElement);\r\n    bookElement.appendChild(bookInfoElement);\r\n\r\n    return bookElement;\r\n  }\r\n\r\n  // Функция для создания HTML-элемента с заданным тегом, классом и текстовым содержимым\r\n  function createElement(tag, className, textContent) {\r\n    const element = document.createElement(tag);\r\n    element.classList.add(className);\r\n    element.textContent = textContent;\r\n    return element;\r\n  }\r\n\r\n  // Функция для создания элемента рейтинга книги\r\n  function createRatingElement(rating, ratingCount) {\r\n    const ratingElement = document.createElement(\"div\");\r\n    ratingElement.classList.add(\"book-rating\");\r\n    ratingElement.innerHTML =\r\n      getStarRating(rating) +\r\n      `<p>${ratingCount} review${ratingCount > 1 ? \"s\" : \"\"}</p>`;\r\n    return ratingElement;\r\n  }\r\n\r\n  // Функция для создания кнопки \"Купить\"\r\n  function createButtonElement({ title, authors, price, cartItems }) {\r\n    const buttonElement = document.createElement(\"button\");\r\n    buttonElement.classList.add(\"button-buy\");\r\n    buttonElement.setAttribute(\"aria-label\", \"Buy now\");\r\n    const isInCart = cartItems.some(\r\n      (item) => item.title === title && item.author === authors\r\n    );\r\n    buttonElement.textContent = isInCart ? \"In the cart\" : \"Buy now\";\r\n    buttonElement.classList.toggle(\"button-in-cart\", isInCart);\r\n\r\n    buttonElement.addEventListener(\"click\", () => {\r\n      const cartItems = JSON.parse(localStorage.getItem(\"cartItems\")) || [];\r\n      const bookIndex = cartItems.findIndex(\r\n        (item) => item.title === title && item.author === authors\r\n      );\r\n      if (bookIndex === -1) {\r\n        cartItems.push({ title, author: authors, price });\r\n        buttonElement.textContent = \"In the cart\";\r\n        buttonElement.classList.add(\"button-in-cart\");\r\n      } else {\r\n        cartItems.splice(bookIndex, 1);\r\n        buttonElement.textContent = \"Buy now\";\r\n        buttonElement.classList.remove(\"button-in-cart\");\r\n      }\r\n      localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\r\n      updateCartCount(cartItems.length);\r\n    });\r\n\r\n    return buttonElement;\r\n  }\r\n\r\n  // Функция для получения HTML-кода звезд рейтинга\r\n  function getStarRating(rating) {\r\n    const maxStars = 5;\r\n    let starsHtml = \"\";\r\n    for (let i = 1; i <= maxStars; i++) {\r\n      starsHtml += `<svg class=\"star\" width=\"12\" height=\"12\" viewBox=\"0 0 32 32\"><use xlink:href=\"#star\" fill=\"${\r\n        i <= rating ? \"#F2C94C\" : \"#EEEDF5\"\r\n      }\"></use></svg>`;\r\n    }\r\n    return starsHtml;\r\n  }\r\n\r\n  // Функция для обновления количества товаров в корзине\r\n  function updateCartCount(count) {\r\n    if (count > 0) {\r\n      cartCountCircle.style.display = \"block\";\r\n      cartCountText.textContent = count.toString();\r\n    } else {\r\n      cartCountCircle.style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  // Начальная установка количества товаров в корзине\r\n  const initialCartItems = JSON.parse(localStorage.getItem(\"cartItems\")) || [];\r\n  updateCartCount(initialCartItems.length);\r\n\r\n  // Сброс корзины при уходе со страницы\r\n  window.addEventListener(\"beforeunload\", () => {\r\n    localStorage.setItem(\"cartItems\", JSON.stringify([]));\r\n  });\r\n\r\n  // Первоначальная загрузка книг\r\n  loadBooks();\r\n\r\n  // Обработчик смены категории\r\n  async function onCategoryChange(newCategory) {\r\n    currentCategory = newCategory;\r\n    startIndex = 0;\r\n    bookContainer.innerHTML = \"\";\r\n    console.log(`Смена категории: ${newCategory}`);\r\n    await loadBooks(newCategory);\r\n  }\r\n}\r\n"],"names":["document","addEventListener","index","imgElements","querySelectorAll","points","Array","from","updateCarousel","forEach","point","classList","remove","img","style","display","add","length","pointClick","event","target","indexOf","idx","setInterval","setupCarousel","sideBarWrapper","querySelector","header","promoOne","promoTwo","window","isScrollDown","scrollY","sideBarWrapperRect","getBoundingClientRect","promoOneRect","promoTwoRect","top","position","offsetHeight","setupScrollHandler","bookContainer","loadMoreButton","categoryLinks","cartCountCircle","cartCountText","startIndex","currentCategory","bookCache","async","loadBooks","category","response","fetch","ok","Error","status","books","json","console","log","cartItems","JSON","parse","localStorage","getItem","items","book","volumeInfo","saleInfo","imageUrl","imageLinks","thumbnail","authors","join","title","bookKey","description","rating","ratingCount","price","priceSource","averageRating","Math","floor","random","ratingsCount","retailPrice","amount","currencyCode","toFixed","getBookData","bookElement","createElement","bookImageElement","imageElement","src","onerror","appendChild","bookInfoElement","ratingElement","innerHTML","starsHtml","i","getStarRating","createRatingElement","buttonElement","setAttribute","isInCart","some","item","author","textContent","toggle","bookIndex","findIndex","push","splice","setItem","stringify","updateCartCount","createButtonElement","createBookElement","displayBooks","totalItems","error","tag","className","element","count","toString","body","insertAdjacentHTML","link","preventDefault","trim","newCategory","onCategoryChange","setupBookstore"],"sourceRoot":""}